<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ASCII live · app</title>
  <link rel="stylesheet" href="https://fonts.cdnfonts.com/css/better-vcr" />
  <link rel="stylesheet" href="styles.css?v=fit2" />
</head>
<body class="theme-dark">
  <div class="wrap" id="app">

    <!-- Верхняя панель -->
    <div class="toolbar">
      <button class="btn" id="flip">РАЗВЕРНУТЬ</button>
      <button class="btn" id="toggle">НАСТРОЙКИ</button>
      <button class="btn ghost" id="fs" aria-label="Fullscreen">FULLSCREEN</button>
    </div>

    <!-- Панель настроек (по умолчанию скрыта) -->
    <div class="panel" id="settings" hidden>
      <label>
        <span>РАЗМЕР</span>
        <input id="width" type="range" min="50" max="250" step="1" />
        <output id="width_val"></output>
      </label>

      <label>
        <span>КОНТРАСТ</span>
        <input id="contrast" type="range" min="0.4" max="2.2" step="0.01" />
        <output id="contrast_val"></output>
      </label>

      <label>
        <span>ГАММА</span>
        <input id="gamma" type="range" min="0.6" max="2.0" step="0.01" />
        <output id="gamma_val"></output>
      </label>

      <label>
        <span>ТЕКСТ</span>
        <input id="fg" type="color" />
      </label>

      <label>
        <span>ФОН</span>
        <input id="bg" type="color" />
      </label>

      <label>
        <span>СТИЛЬ</span>
        <select id="stylePreset"></select>
      </label>

      <label>
        <span>FPS</span>
        <input id="fps" type="range" min="5" max="60" step="1" />
        <output id="fps_val"></output>
      </label>

      <label>
        <span>НАБОР:</span>
        <select id="charset">
          <option value='classic'>CLASSIC</option>
          <option value='numbers'>NUMBERS</option>
          <option value='letters_lower'>LETTERS (a–z)</option>
          <option value='letters_upper'>LETTERS (A–Z)</option>
          <option value='dots_ascii'>DOTS (ASCII)</option>
          <option value='blocks'>░▒▓█</option>
          <option value='custom'>CUSTOM</option>
        </select>
      </label>

      <!-- Панель кастомного набора -->
      <div class="ascii-custom" id="asciiCustom" hidden>
        <label for="customChars" class="ascii-custom__label">Свой набор символов</label>
        <div class="ascii-custom__row">
          <input id="customChars"
                 class="ascii-input"
                 type="text"
                 inputmode="text"
                 autocomplete="off"
                 spellcheck="false"
                 placeholder="Например:  ·.:;!il1tfL#MW@" />
          <button id="applyCustom" class="btn btn-primary">Применить</button>
          <button id="resetCustom" class="btn btn-ghost" title="Сбросить на Classic">Сброс</button>
        </div>
        <small class="ascii-help">
          Совет: добавь пробел в начале для «чёрного». Дубликаты убираются автоматически. Юникод можно.
        </small>
      </div>

      <label class="check">
        <input id="invert" type="checkbox" />
        <span>ИНВЕРСИЯ</span>
      </label>
    </div>

    <!-- Сцена вывода -->
    <div class="stage" id="stage">
      <pre id="out" class="ascii-surface"></pre>
    </div>

    <!-- Скрытое видео (источник камеры) -->
    <video id="vid" playsinline autoplay muted hidden></video>
  </div>

  <!-- важное: теперь это ES-модуль -->
  <script type="module" src="ascii.js?v=fit2"></script>
</body>
</html>
