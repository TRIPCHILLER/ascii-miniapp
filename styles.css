/* ===== БАЗА ===== */
* { box-sizing: border-box; }
html,body{ height:100%; margin:0; }
body.theme-dark{ background:#000; color:#fff; }
html, body, .wrap { overflow-x: hidden; }
.panel label { flex-wrap: wrap; }

:root{
  --ui-bg:#151515;     /* тулбар/фон панели */
  --ui-panel:#1b1b1b;  /* карточки внутри панели */
  --ui-text:#ffffff;
}

.wrap{ display:flex; flex-direction:column; height:100%; }
/* ===== АНТИ-ВЫДЕЛЕНИЕ UI ===== */
/* На всём приложении — нельзя выделять, вызывать callout, перетаскивать */
.wrap, .toolbar, .panel, .modebar,
button, .btn, label, output {
  -webkit-user-select: none;
      -ms-user-select: none;
          user-select: none;
  -webkit-touch-callout: none;        /* отключает лонгтап-меню iOS */
  -webkit-tap-highlight-color: transparent; /* убирает синий флэш на мобилках */
}

/* Но полям ввода — можно (иначе нельзя править кастомный набор и т.п.) */
input, textarea, select {
  -webkit-user-select: text;
          user-select: text;
  -webkit-touch-callout: default;
}

/* Запретить перетаскивание медиа/пре */
img, video, canvas, pre {
  -webkit-user-drag: none;
          user-drag: none;
}

/* На всякий: ссылки в тулбарах (если появятся) тоже без выделения */
.toolbar a, .modebar a { 
  -webkit-user-select: none;
          user-select: none;
  -webkit-touch-callout: none;
}

/* ===== ТУЛБАР ===== */
.toolbar {
  display:flex; gap:8px; align-items:center;
  justify-content:center;
  padding:10px;
  background:#000; 
}

/* ===== КНОПКИ — базовая очистка стилей ===== */
button, .btn, input[type="button"], input[type="submit"]{
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  background:transparent;          /* ← без !important */
  background-image:none;           /* ← без !important */
  color:var(--ui-text);
  border:0; outline:none; box-shadow:none;   /* без !important */
  padding:.55rem 1rem; border-radius:0; cursor:pointer;
  -webkit-tap-highlight-color:transparent;
}

button:hover, .btn:hover,
button:active, .btn:active,
button:focus, .btn:focus{
  background:transparent;
  border:0; outline:none; box-shadow:none;
}

/* ===== ПАНЕЛЬ ===== */
.panel{
  display:flex; flex-wrap:wrap; gap:12px; padding:8px;
  background:var(--ui-bg);
}
.panel[hidden]{ display:none !important; }
[hidden] { display: none !important; }
.panel label{
  display:flex; gap:8px; align-items:center;
  background:transparent;
  padding:6px 8px; border-radius:0;
}
.panel input[type="range"]{ width:160px; }
.panel output{ min-width:42px; text-align:right; }

.panel .row.colors{
  display:flex;
  flex-wrap: wrap;     /* можно переносить на следующую строку */
  gap:6px;             /* небольшой зазор между ТЕКСТ и ФОН */
  width:auto;          /* не занимать всю строку насильно */
  align-items:center;
}

.panel .row.colors .color{
  flex:0 0 auto;       /* не растягивать плашки */
  display:flex;
  align-items:center;
  gap:4px;             /* расстояние между словом и квадратом */
  white-space:nowrap;  /* внутри плашки текст+квадрат не рвём */
}

/* компактный чекбокс — показываем только текст, без квадратика */
.check{
  display:flex;
  align-items:center;
  /* gap убираем, т.к. остаётся только текст */
  padding:6px 8px;
  cursor:pointer;
}
.check input[type="checkbox"]{
  display:none;        /* полностью убираем из потока, клики по label всё равно работают */
}

/* ===== СЦЕНА/ВЫВОД ===== */
.stage{
  flex:1; min-height:0; position:relative;
  background:#000; overflow:hidden;
}

#out{
  position:absolute;
  top:50%; left:50%;
  transform:translate(-50%,-50%) scale(1);
  transform-origin:center center;
  margin:0;
  user-select:none;

  font-family: "MS Gothic",monospace;
  font-weight: 400;
  font-variant-ligatures: none;
  -webkit-font-smoothing: none;
  white-space: pre;
  letter-spacing: 0em;
  line-height: 1;

  font-size:16px;
  color:#8ac7ff;
  background:#000;
}
/* Белое размытое свечение по КРАЯМ экрана, как в ТГ */
.stage.flash-front::before{
  content:'';
  position:absolute;
  inset:-32px;
  pointer-events:none;
  z-index:2;

  /* более яркое, более широкое свечение к центру */
  background:
    linear-gradient(to bottom, rgba(255,255,255,1.0) 0%, rgba(255,255,255,0.0) 60%), /* верх */
    linear-gradient(to top,    rgba(255,255,255,1.0) 0%, rgba(255,255,255,0.0) 60%), /* низ  */
    linear-gradient(to right,  rgba(255,255,255,1.0) 0%, rgba(255,255,255,0.0) 60%), /* левый край  */
    linear-gradient(to left,   rgba(255,255,255,1.0) 0%, rgba(255,255,255,0.0) 60%); /* правый край */

  background-repeat: no-repeat;
  background-size:
    100% 35%,   /* верхняя полоса */
    100% 35%,   /* нижняя */
    50% 100%,   /* левая */
    50% 100%;   /* правая */
  background-position:
    top,
    bottom,
    left,
    right;

  mix-blend-mode: screen;
  filter: blur(4px);            /* чуть меньше размытие → визуально ярче */
}


/* чтобы ASCII всегда был поверх свечения */
#out{ z-index:1; }

/* === Инверсия UI при вспышке на фронталке === */
body.flash-front-ui {
  --ui-bg:#ffffff;
  --ui-panel:#f7f7f7;
  --ui-text:#000000;

  background:#ffffff;
  color:#000000;
}

/* верхняя панель, ряд иконок камеры, нижний бар режимов */
body.flash-front-ui .toolbar,
body.flash-front-ui .cam-controls,
body.flash-front-ui .modebar {
  background:#ffffff;
  border-top:1px solid #e0e0e0;
}

/* панель настроек, если открыта */
body.flash-front-ui .panel {
  background:#ffffff;
}

/* текст режимов: неактивные серые, активный чёрный */
body.flash-front-ui .modebar .btn {
  color:#777777;
}
body.flash-front-ui .modebar .btn.active {
  color:#000000;
}

/* иконки вспышки/таймеров инвертируем */
body.flash-front-ui .cam-icon img{
  filter: invert(1) brightness(1.15) contrast(1.05);
}

/* ===== RANGE (ползунки) — белый тонкий трек, квадратный белый бегунок ===== */
input[type="range"]{
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  background:transparent; height:18px;
  margin:0; padding:0;
}
/* WebKit */
input[type="range"]::-webkit-slider-runnable-track{
  height:2px; background:#fff; border:none; box-shadow:none;
}
input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:16px; height:16px; background:#fff;
  border:none; border-radius:0; margin-top:-7px; box-shadow:none;
}
/* Firefox */
input[type="range"]::-moz-range-track{
  height:2px; background:#fff; border:none;
}
input[type="range"]::-moz-range-thumb{
  width:16px; height:16px; background:#fff;
  border:none; border-radius:0; box-shadow:none;
}
/* MS Edge (old) */
input[type="range"]::-ms-track{
  height:2px; background:transparent; border-color:transparent; color:transparent;
}
input[type="range"]::-ms-fill-lower,
input[type="range"]::-ms-fill-upper{
  background:#fff; border:none;
}
input[type="range"]::-ms-thumb{
  width:16px; height:16px; background:#fff;
  border:none; border-radius:0; margin-top:0; box-shadow:none;
}

/* ===== SELECT/INPUT — без рамок/заливок, белый текст ===== */
input, select, textarea{
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  background:transparent; color:var(--ui-text);
  border:0 !important; outline:none !important; box-shadow:none !important;
}
/* Color picker — убираем рамки квадратиков */
input[type="color"]::-webkit-color-swatch-wrapper { padding:0; }
input[type="color"]::-webkit-color-swatch { border:none; }
input[type="color"]::-moz-color-swatch { border:none; }

select{ background:transparent; color:var(--ui-text); }
option{ background:var(--ui-panel); color:var(--ui-text); }

/* небольшая защита от «прыжков» при клавиатуре на мобилках */
@supports (padding: env(safe-area-inset-bottom)){
  .wrap{ padding-bottom: env(safe-area-inset-bottom); }
}

/* Поле пользовательского набора символов:
   базовая (десктопная) ширина + ограничение, чтобы не вылезало за экран */
#charset_custom {
  width: 260px;           /* как было на десктопе */
  max-width: 60vw;        /* но не шире 60% экрана */
  display: none;          /* показываем/прячем через JS */
}
/* === Шрифт для CJK (MS Gothic) === */
@font-face {
    font-family: "MS Gothic";
    src: url("./assets/MS Gothic.woff2") format("woff2");
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}
@font-face {
  font-family: "BetterVCR";
  src: url("./assets/BetterVCR.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* === Шрифт интерфейса === */
body, .toolbar, .panel, .btn, label, output, select, option {
  font-family: 'BetterVCR', sans-serif;
  font-size: 18px; /* сделает одинаковым для кнопок и подписей */
  line-height: 1.1;
}

/* ===== FULLSCREEN ===== */
:fullscreen .toolbar,
:fullscreen .panel,
:fullscreen .modebar { display:none !important; }

.body-fullscreen .toolbar,
.body-fullscreen .panel,
.body-fullscreen .modebar { display:none !important; }


.fs-exit {
  position:fixed; top:10px; right:10px; width:36px; height:36px;
  display:flex; align-items:center; justify-content:center;
  background:rgba(0,0,0,.6);
  color:var(--ui-text);
  cursor:pointer; z-index:9999; user-select:none;
}
.fs-exit::after { content:"⤢"; font-size:18px; line-height:1; }

.body-fullscreen .stage { width:100vw; height:100vh; }

/* === Fullscreen fallback / Чистый экран на мобилках без системного FS === */
.body-fullscreen {
  overflow: hidden;
}

.body-fullscreen .wrap#app {
  position: fixed !important;
  inset: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  background: #000; /* чтобы не просвечивало */
  z-index: 9999;
}

.body-fullscreen #stage {
  width: 100%;
  height: 100%;
}
/* === BUSY OVERLAY === */
#busy{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  background:rgba(0,0,0,.75);
  z-index: 3;           /* поверх #out и #placeholder */
  backdrop-filter: blur(2px);
}
#busy[hidden]{ display:none !important; }

#busy .busy-box{
  display:flex; flex-direction:column; align-items:center; gap:24px; /* ↑ больше расстояние */
  padding:0;                                      /* без внутренней карты */
  background:transparent;                         /* убрали подложку */
  border:none;                                    /* убрали белую рамку */
  box-shadow:none;
}


#busy .busy-text{
  color:#fff; font-family:'BetterVCR', sans-serif; font-size:18px;
  text-align:center; white-space:pre-line;
}

/* === CUSTOM LOGO SPINNER === */
.busy-spinner {
  position: relative;
  width: 64px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.spinner-layer {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.spinner-layer img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  pointer-events: none;
}

/* вращается только внешняя часть (лепестки) с инерцией */
.spinner-layer.flower{
  animation: spin-inertia 2.6s cubic-bezier(.2,.8,.2,1) infinite;
  transform-origin: center;
  will-change: transform;
}

/* зрачок остаётся статичным */
.spinner-layer.pupil{ animation: none; }

/* Разгон → один оборот → замедление → пауза (без перекрутки) */
@keyframes spin-inertia{
  0%   { transform: rotate(0turn); }
  70%  { transform: rotate(1turn); }  /* один полный оборот завершён */
  100% { transform: rotate(1turn); }  /* короткая пауза в конце */
}

/* На всякий случай: скрыть любые пережитки иконок выхода, если где-то остались */
.fs-exit,
#fs-exit {
  display: none !important;
}

/* ===== Мобильный компакт-вид ===== */
@media (max-width: 600px) {
  /* Меньше шрифт по всему UI */
  body, .toolbar, .panel, .btn, label, output, select, option {
    font-size: 14px;
  }

  /* Кнопки и панель */
  .toolbar { gap: 6px; padding: 6px; flex-wrap: wrap; }
  .btn { padding: .4rem .6rem; }
  .panel { gap: 8px; padding: 6px; }
  .panel label { gap: 6px; padding: 4px 6px; }

  /* Слайдеры компактнее */
  .panel input[type="range"] { width: 140px; height: 14px; }
  input[type="range"]::-webkit-slider-thumb { width: 12px; height: 12px; margin-top: -5px; }
  input[type="range"]::-moz-range-thumb     { width: 12px; height: 12px; }

  /* Селекты/инпуты */
  select { max-width: 58vw; }
  #charset_custom { width:100% !important; max-width:62vw; }

  /* Ряд цветов — компактно и без переполнения */
  .panel .row.colors { flex-wrap: wrap; gap:4px; width:auto; }
  .panel .row.colors .color { flex:0 0 auto; gap:2px; white-space:nowrap; }
}

/* очень узкие экраны — можно сложить цвета в столбик (по желанию) */
@media (max-width: 360px){
  .panel .row.colors{ flex-direction: column; }
}
/* ===== РЯД ИКОНОК КАМЕРЫ (вспышка, таймер) ===== */
.cam-controls{
  display:flex;
  justify-content:center;
  align-items:flex-end;
  gap:18px;
  padding:6px 0 4px;
  background:#000;             /* как у нижней панели */
  border-top:1px solid #111;   /* тонкая линия, чтобы не сливалось со сценой */
}

.cam-icon{
  padding:0;
  width:32px;
  height:32px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.cam-icon img{
  width:26px;
  height:26px;
  object-fit:contain;
  pointer-events:none;
}

/* ===== НИЖНИЙ РЯД РЕЖИМОВ ===== */
.modebar{
  display:flex; justify-content:center; gap:12px;
  padding:10px; background:#000; border-top:1px solid #111;
}

/* ===== ПЛЕЙСХОЛДЕР ДЛЯ ФОТО/ВИДЕО ===== */
#out { z-index: 1; }  
#placeholder{
  position:absolute; inset:0;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:8px; color:#cfe6ff; text-align:center;
  z-index: 0;                     /* плейсхолдер под ASCII */
  pointer-events: none;           /* чтобы не перехватывал события */
}
#placeholder .ph-ico{ font-size:48px; opacity:.7; }

/* Видео-источник должен быть «видим» для браузера, но вне экрана */
.capture-src{
  position: fixed;
  width: 1px;
  height: 1px;
  left: -99999px;
  top: -99999px;
  opacity: 0;
  pointer-events: none;
}

/* тулбары — без жестового зума/скролла */
.toolbar,
.modebar,
.panel { touch-action: manipulation; }

/* сцена берёт все жесты (пинч-зум) */
#stage{
  touch-action: none;
  overscroll-behavior: contain;
  user-select: none;
}

/* Централизованная подсветка активного режима */
.modebar .btn { color:#808080; }
.modebar .btn.active { color:#ffffff; }

/* === Custom Color Picker (Android) === */
#cp-modal[hidden]{ display:none !important; }
#cp-modal{
  position:fixed; inset:0; z-index:99999;
  display:flex; align-items:center; justify-content:center;
  font-family:'BetterVCR', sans-serif; /* твой шрифт */
}
#cp-modal .cp-backdrop{
  position:absolute; inset:0; background:rgba(0,0,0,.65); backdrop-filter: blur(2px);
}
#cp-modal .cp-card{
  position:relative; width:92vw; max-width:420px;
  background:#2a2a2a; color:#fff; border-radius:12px; padding:16px;
  box-shadow:0 10px 40px rgba(0,0,0,.5);
}
#cp-modal .cp-title{ font-size:18px; margin-bottom:10px; }
#cp-modal .cp-row{ display:flex; gap:10px; align-items:center; }
#cp-modal canvas#cp-sv{
  width:220px; height:190px; border-radius:6px; background:#000; touch-action:none;
}
#cp-modal .cp-side{ display:flex; flex-direction:column; gap:10px; align-items:center; }

#cp-modal #cp-h{
  width:24px;
  height:190px;
  display:block;
  border-radius:6px;
  background:#000;      /* сам градиент рисуется в JS */
  touch-action:none;    /* чтобы тач-драги не скроллили */
}

#cp-modal .cp-preview{ width:42px; height:42px; border:1px solid #444; border-radius:6px; display:flex; align-items:center; justify-content:center; }

#cp-modal #cp-preview-swatch{
display:block;
width:32px;
height:32px;
border-radius:4px;
background:#fff; }

#cp-modal .cp-actions{
  margin-top:12px;
  display:flex;
}


#cp-modal .cp-actions button{
  color:#ffffff;
  background:transparent;
  border:0;
  padding:.4rem .6rem;
  font-family:'BetterVCR', monospace;
  font-size:14px;              /* тот же размер, что и у вкладок */
  text-transform:uppercase;
  letter-spacing:0.06em;

  flex:1 1 50%;                /* каждая кнопка занимает свою половину */
  text-align:center;           /* текст ровно по центру своей половины */
}

/* === CAMERA SHUTTER (LIVE only) === */
#camShutter{
  position:absolute; left:50%; bottom:125px; transform:translateX(-50%);
  width:75px; height:75px; display:flex; align-items:center; justify-content:center;
  z-index:1; pointer-events:auto; touch-action:manipulation;
}
#camShutter img{
  position:absolute; width:100%; height:100%; object-fit:contain; pointer-events:none;
}

/* Кольцо — поверх */
#camBtnCircle{ z-index:2; }

/* Ядро — под кольцом и принудительно уменьшено,
   чтобы зазор был ВСЕГДА (и в белом, и в сером состоянии) */
#camBtnCore{
  z-index:1;
  transform: scale(0.85);      /* подбери 0.84–0.90 под свой зазор */
  transform-origin: 50% 50%;
}

#camShutter.active #camBtnCore{ filter:brightness(.6); }

/* Квадратные мини-свотчи в панелях */
.panel .row.colors input[type="color"]{
  width: 24px; height: 24px;
}

/* Если для #bg в коде поставим класс .transparent — показываем иконку PNG */
#bg.transparent::-webkit-color-swatch{
  background: url('assets/PNG.svg') center/cover no-repeat, #222;
}
#bg.transparent::-moz-color-swatch{
  background: url('assets/PNG.svg') center/cover no-repeat, #222;
}

/* Строка чекбокса в Android-пикере */
#cp-modal .cp-transparent-row{ margin:10px 0 2px; }

.cp-transparent-check{
  display:inline-flex;
  align-items:center;    /* выровнять текст по центру чекбокса */
  cursor:pointer;
  /* gap не используем, потому что квадрат — это ::before у span */
}

/* сам текст */
.cp-transparent-check span{
  display:inline-flex;   /* даёт точное выравнивание по центру */
  align-items:center;
  line-height:20px;      /* высота текста = высоте квадрата */
  font-family:'betterVCR', monospace;
}

/* чёрный квадрат */
.cp-transparent-check input{ display:none; }
.cp-transparent-check span::before{
  content:'';
  width:20px;
  height:20px;
  background:#000;
  border:1px solid #666;
  display:inline-block;
  vertical-align:middle;
  margin-right:10px;   /* ← отступ между квадратом и текстом */
}

/* белый внутренний квадратик при активном чекбоксе */
.cp-transparent-check input:checked + span::before{
  background:#000;
  box-shadow: inset 0 0 0 7px #fff;
  border-color:#000;
}
/* === BG palette: «серость» без отключения кликов === */
.panel .row.colors input[type="color"].is-disabled{
  opacity: .45;
  filter: grayscale(1);
  /* НЕ трогаем pointer-events — клик должен открывать модал */
}

/* === Android color modal: реальная блокировка внутри модалки === */
#cp-modal.cp-disabled #cp-sv,
#cp-modal.cp-disabled #cp-h{
  filter: grayscale(1) brightness(.55);
  pointer-events: none; /* внутри менять цвет нельзя */
}

#cp-modal.cp-disabled #cp-preview-swatch{
  filter: grayscale(1) brightness(.75);
  opacity: .7;
}

/* опционально — слегка «гасим» заголовок/лейблы внутри модалки, когда заблокировано */
#cp-modal.cp-disabled .cp-label {
  opacity: .6;
}

/* === Оверлей таймера камеры === */
#camTimerOverlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  z-index: 4; /* выше ASCII-текста, ниже busy-оверлея */
}

#camTimerNumber {
  font-family: 'BetterVCR', monospace;
  font-size: clamp(64px, 20vw, 140px);
  color: #fff;
  letter-spacing: 0.12em;
  text-shadow:
    0 0 10px rgba(0,0,0,.9),
    0 0 25px rgba(0,0,0,.9);
}

/* Панель настроек как оверлей: не двигает сцену.
   top будем выставлять через JS ровно под тулбар */
#settings.panel {
  position: absolute;
  left: 0;
  right: 0;
  z-index: 50;
}

/* Внутри панели можно скроллить, высоту подгоним из JS */
#settings.panel {
  max-height: calc(100vh - 80px);
  overflow-y: auto;
}

/* Лёгкая тень под кольцом затвора — как у таймера */
#camBtnCircle {
  filter: drop-shadow(0 0 6px rgba(0,0,0,0.55));
}

/* === Инверсия ползунков (range) при flash-front-ui === */
body.flash-front-ui input[type="range"]::-webkit-slider-runnable-track {
  background:#000 !important;
}

body.flash-front-ui input[type="range"]::-webkit-slider-thumb {
  background:#000 !important;
}

body.flash-front-ui input[type="range"]::-moz-range-track {
  background:#000 !important;
}

body.flash-front-ui input[type="range"]::-moz-range-thumb {
  background:#000 !important;
}

body.flash-front-ui input[type="range"]::-ms-fill-lower,
body.flash-front-ui input[type="range"]::-ms-fill-upper {
  background:#000 !important;
}

body.flash-front-ui input[type="range"]::-ms-thumb {
  background:#000 !important;
}

/* === Color Picker: вкладки и сетка === */
.cp-card{
  background:#181818;
  border-radius:16px;
  padding:14px 16px 12px;
  max-width:360px;
  width:100%;
  box-sizing:border-box;
}

/* Вкладки */
.cp-tabs{
  display:flex;
  margin-bottom:10px;
  font-family:'BetterVCR', monospace;
  font-size:14px;
  letter-spacing:0.06em;
  text-transform:uppercase;
  justify-content:space-between;
}

.cp-tab{
  flex:1 1 50%;
  padding:6px 4px 7px;
  border:0;
  margin:0;
  background:#2a2a2a;
  color:#777;
  cursor:pointer;

  /* Гарантируем фирменный шрифт и капс прямо на кнопке */
  font-family:'BetterVCR', monospace !important;
  font-size:14px;
  text-transform:uppercase;
  letter-spacing:0.06em;
}

.cp-tab + .cp-tab{
  border-left:1px solid #303030;
}

.cp-tab-active{
  color:#ffffff;
}

/* Контейнеры режимов */
.cp-body{
  background:#202020;
  padding:10px 10px 12px;
  box-sizing:border-box;
}

/* Сетка цветов */
#cp-grid{
  display:flex;
  flex-direction:column;
  gap:4px;
}

.cp-grid-row{
  display:flex;
  gap:4px;
}

.cp-grid-swatch{
  width:22px;
  height:22px;
  border-radius:2px;
  padding:0;
  margin:0;
  border:1px solid #000;        /* чёрная сетка вокруг квадратиков */
  display:block;                /* чтобы точно занял всю область */
  box-sizing:border-box;
  cursor:pointer;
  outline:none;
  background-clip:padding-box;  /* цвет не «уползёт» под границу */
}

.cp-grid-swatch:focus-visible{
  outline:1px solid #ffffff;
}

/* Когда активен ПРОЗРАЧНЫЙ ФОН – делаем палитру визуально «приглушённой» */
.cp-card.cp-disabled .cp-body{
  opacity:0.35;
  pointer-events:none;
}

/* Строка чекбокса */
.cp-transparent-row{
  margin-top:8px;
  margin-bottom:6px;
}

/* === FIX: компактная карточка цветового пикера === */
#cp-modal .cp-card{
  width: auto;         /* не 92vw, а по содержимому */
  max-width: 360px;    /* как на макете */
}

/* выравниваем контент по центру, чтобы не было ощущения полосы справа */
#cp-modal .cp-row{
  justify-content: center;
}

/* сетку тоже центруем внутри карточки */
#cp-grid{
  margin: 0 auto;
}
