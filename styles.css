/* ===== БАЗА ===== */
* { box-sizing: border-box; }
html,body{ height:100%; margin:0; }
body.theme-dark{ background:#000; color:#fff; }

:root{
  --ui-bg:#151515;
  --ui-panel:#1b1b1b;
  --ui-text:#ffffff;
}

.wrap{ display:flex; flex-direction:column; height:100%; }

/* ===== ТУЛБАР ===== */
.toolbar{
  display:flex; gap:8px; align-items:center;
  padding:10px; background:var(--ui-bg);
}

/* ===== КНОПКИ ===== */
button, .btn, input[type="button"], input[type="submit"]{
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  background:transparent !important;
  color:var(--ui-text);
  border:0 !important; outline:none !important; box-shadow:none !important;
  padding:.55rem 1rem; border-radius:0; cursor:pointer;
  -webkit-tap-highlight-color:transparent;
}
button:hover, .btn:hover,
button:active, .btn:active,
button:focus, .btn:focus{
  background:transparent !important;
  border:0 !important; outline:none !important; box-shadow:none !important;
}

.btn-primary{ background:#1f6aff !important; color:#fff !important; }
.btn-ghost{ border:1px solid rgba(255,255,255,.15) !important; color:#aab7ff !important; }

/* ===== ПАНЕЛЬ ===== */
.panel{
  display:flex; flex-wrap:wrap; gap:12px; padding:8px;
  background:var(--ui-bg);
}
.panel[hidden]{ display:none !important; }
.panel label{
  display:flex; gap:8px; align-items:center;
  background:var(--ui-panel);
  padding:6px 8px; border-radius:0;
}
.panel input[type="range"]{ width:160px; }
.panel output{ min-width:42px; text-align:right; }

/* компактный чекбокс */
.check{ display:flex; align-items:center; gap:8px; padding:6px 8px; }

/* ===== СЦЕНА/ВЫВОД ===== */
.stage{
  flex:1; min-height:0; display:grid; place-items:center; overflow:hidden;
  background:#000;
}
#out{
  margin:0; white-space:pre; user-select:none;
  font-family: ui-monospace, Menlo, Consolas, "Cascadia Mono", monospace;
  line-height:1ch; font-size:16px;
  color:#8ac7ff; background:#000;
  border-radius:0; max-width:100%; max-height:100%;
}

/* ===== RANGE ===== */
input[type="range"]{
  appearance:none; background:transparent; height:18px; margin:0; padding:0;
}
input[type="range"]::-webkit-slider-runnable-track{ height:2px; background:#fff; border:none; }
input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none; width:16px; height:16px; background:#fff; border:none; border-radius:0; margin-top:-7px;
}
input[type="range"]::-moz-range-track{ height:2px; background:#fff; border:none; }
input[type="range"]::-moz-range-thumb{ width:16px; height:16px; background:#fff; border:none; border-radius:0; }
input, select, textarea{
  appearance:none; background:transparent; color:var(--ui-text);
  border:0 !important; outline:none !important; box-shadow:none !important;
}
select{ background:transparent; color:var(--ui-text); }
option{ background:var(--ui-panel); color:var(--ui-text); }

@supports (padding: env(safe-area-inset-bottom)){
  .wrap{ padding-bottom: env(safe-area-inset-bottom); }
}

/* === Шрифт интерфейса === */
body, .toolbar, .panel, .btn, label, output, select, option {
  font-family: 'Better VCR', sans-serif;
}

/* ===== FULLSCREEN ===== */
:fullscreen .toolbar, :fullscreen .panel { display:none !important; }
.body-fullscreen .toolbar, .body-fullscreen .panel { display:none !important; }

.fs-exit { display:none !important; }
.body-fullscreen { overflow:hidden; }
.body-fullscreen .wrap#app { position:fixed; inset:0; width:100vw; height:100vh; background:#000; z-index:9999; }
.body-fullscreen #stage { width:100%; height:100%; touch-action:manipulation; }

/* ===== Custom Charset Panel ===== */
.ascii-custom[hidden]{ display:none !important; }
.ascii-custom{ margin-top:.5rem; display:grid; gap:.5rem; }
.ascii-custom__label{ opacity:.85; font-size:.9rem; }
.ascii-custom__row{ display:flex; gap:.5rem; align-items:center; }
.ascii-input{
  width:100%; padding:.5rem .6rem; border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.04); color:#dfe9ff; border-radius:.5rem;
  font-family:"Better VCR", ui-monospace, Menlo, Consolas, monospace;
}

/* Ровная моносетка (на всякий случай ещё раз) */
.ascii-surface{
  white-space:pre;
  font-family:"Better VCR", ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-kerning:none; font-variant-ligatures:none;
  letter-spacing:0; line-height:1;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
