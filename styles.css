/* ====== Подключение BetterVCR (для UI) ====== */
@font-face{
  font-family:'BetterVCR';
  src:url('assets/BetterVCR.woff2') format('woff2'),
      url('assets/BetterVCR.woff')  format('woff');
  font-display:swap;
  font-weight:400;
  font-style:normal;
  font-synthesis:none;
}

/* ====== Цвета ====== */
:root{
  --ui-bg:#141414;      /* тёмно-серый фон панели/тулбара */
  --ui-panel:#1b1b1b;   /* панели */
  --ui-border:#ffffff;  /* белая обводка */
  --ui-text:#ffffff;    /* белый текст */
}

/* ====== Базовые ====== */
html,body{
  height:100%;
  margin:0;
  overflow:hidden;
}

body.theme-dark{
  background:#000;
  color:#fff;
  font-family:'BetterVCR', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
}

/* Сетка */
.wrap{
  display:flex;
  flex-direction:column;
  height:100%;
}

/* ====== ТУЛБАР ====== */
.toolbar{
  display:flex;
  gap:8px;
  align-items:center;
  padding:10px;
  flex-wrap:wrap;
  background:var(--ui-bg);
  border-bottom:1px solid var(--ui-border);
}

/* ====== ПАНЕЛЬ ====== */
.panel{
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  padding:8px;
  background:var(--ui-bg);
  border-bottom:1px solid var(--ui-border);
}

.panel label{
  display:flex;
  gap:8px;
  align-items:center;
  background:var(--ui-panel);
  border:1px solid var(--ui-border);
  padding:6px 8px;
  border-radius:0;
  color:var(--ui-text);
}

.panel [type="range"]{ width:180px }
.panel output{ min-width:40px; text-align:right }

.panel .check{
  display:flex; align-items:center; gap:8px;
  padding:6px 10px;
}

/* Скрытие панели по умолчанию */
.panel[hidden]{ display:none !important; }

/* ====== КНОПКИ ====== */
.btn{
  background:transparent;
  color:var(--ui-text);
  border:1px solid var(--ui-border);
  padding:.55rem 1rem;
  border-radius:0;
  cursor:pointer;
}
.btn[disabled]{opacity:.5;cursor:not-allowed}
.btn:focus-visible{ outline:2px dashed var(--ui-border); outline-offset:2px; }

/* ====== СЦЕНА ====== */
.stage{
  flex:1;
  display:grid;
  place-items:center;
  overflow:hidden;
  min-height:0;
  background:#000; /* подложка вокруг ASCII */
}

/* ASCII-вывод */
pre{
  white-space:pre;
  font-family:ui-monospace,Menlo,Consolas,monospace !important; /* строго моноширинный */
  line-height:1ch;      /* квадратная «клетка» */
  font-size:12px;       /* стартовое — дальше регулирует JS */
  margin:0;
  user-select:none;
  color:var(--fg,#8ac7ff);
  background:var(--bg,#000);
  padding:10px 12px;
  border:1px solid var(--ui-border);
  border-radius:0;
  box-sizing:border-box;
  max-width:100%;
  max-height:100%;
}

/* ====== МОДАЛКА ====== */
.modal{
  position:fixed;
  inset:0;
  display:grid;
  place-items:center;
  background:rgba(0,0,0,.72);
  z-index:2147483647;
}
.modal[hidden]{ display:none !important; }

.card{
  background:var(--ui-panel);
  border:1px solid var(--ui-border);
  border-radius:0;
  padding:18px;
  max-width:420px;
  width:min(420px,90vw);
  color:var(--ui-text);
}
.card h3{ margin:0 0 8px }

/* Блокируем клики по UI только пока модалка видима */
.modal:not([hidden]) ~ .wrap .toolbar,
.modal:not([hidden]) ~ .wrap .stage{
  pointer-events:none !important;
}

/* безоп. зона iOS */
.wrap{ padding-bottom:env(safe-area-inset-bottom) }
