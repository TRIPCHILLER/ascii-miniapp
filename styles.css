/* ===== BetterVCR для UI ===== */
@font-face{
  font-family:'BetterVCR';
  src:url('assets/BetterVCR.woff2') format('woff2'),
      url('assets/BetterVCR.woff')  format('woff');
  font-display:swap;
  font-weight:400;
  font-style:normal;
  font-synthesis:none;
}

/* ===== Цвета интерфейса ===== */
:root{
  --ui-bg:#141414;
  --ui-panel:#1b1b1b;
  --ui-border:#ffffff;
  --ui-text:#ffffff;
}

/* ===== База ===== */
html,body{ height:100%; margin:0; overflow:hidden; }
body.theme-dark{ background:#000; color:#fff; }

/* UI — BetterVCR */
.toolbar, .panel, .btn,
.toolbar *,.panel *,.btn *,.card,.card *{
  font-family:'BetterVCR', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial !important;
  color:var(--ui-text);
}

/* Макет */
.wrap{ display:flex; flex-direction:column; height:100%; }

/* Toolbar */
.toolbar{
  display:flex; gap:8px; align-items:center; flex-wrap:wrap;
  padding:10px; background:var(--ui-bg); border-bottom:1px solid var(--ui-border);
}

/* Панель */
.panel{
  display:flex; flex-wrap:wrap; gap:12px; padding:8px;
  background:var(--ui-bg); border-bottom:1px solid var(--ui-border);
}
.panel[hidden]{ display:none !important; }
.panel label{
  display:flex; gap:8px; align-items:center;
  background:var(--ui-panel);
  border:1px solid var(--ui-border);
  padding:6px 8px; border-radius:0;
}
.panel [type="range"]{ width:180px }
.panel output{ min-width:40px; text-align:right }
.panel .check{ display:flex; align-items:center; gap:8px; padding:6px 10px; }

/* Кнопки */
.btn{
  background:transparent;
  color:var(--ui-text);
  border:1px solid var(--ui-border);
  padding:.55rem 1rem;
  border-radius:0;
  cursor:pointer;
}
.btn[disabled]{opacity:.5;cursor:not-allowed}
.btn:focus-visible{ outline:2px dashed var(--ui-border); outline-offset:2px; }

/* Сцена */
.stage{
  flex:1; display:grid; place-items:center; overflow:hidden; min-height:0;
  background:#000;
}

/* ASCII: жёсткий моноширинный, без лигатур и «улучшайзеров» */
pre{
  white-space:pre;
  font-family:ui-monospace, Menlo, Consolas, monospace !important;
  font-variant-ligatures:none !important;
  font-kerning:none !important;
  text-rendering:optimizeSpeed;
  letter-spacing:0 !important;

  line-height:1.0;        /* высоту строки считаем измерением (см. JS), не 1ch */
  font-size:12px;         /* будет пересчитано JS */
  margin:0; user-select:none;
  color:var(--fg,#8ac7ff);
  background:var(--bg,#000);
  padding:10px 12px;
  border:1px solid var(--ui-border);
  border-radius:0;
  box-sizing:border-box;
  max-width:100%;
  max-height:100%;
}

/* Модалка */
.modal{
  position:fixed; inset:0; display:grid; place-items:center;
  background:rgba(0,0,0,.72); z-index:2147483647;
}
.modal[hidden]{ display:none !important; }

.card{
  background:var(--ui-panel); border:1px solid var(--ui-border);
  border-radius:0; padding:18px;
  max-width:420px; width:min(420px,90vw); color:var(--ui-text);
}
.card h3{ margin:0 0 8px }

/* Блокируем клики под модалкой */
.modal:not([hidden]) ~ .wrap .toolbar,
.modal:not([hidden]) ~ .wrap .stage{
  pointer-events:none !important;
}

/* Безопасная зона iOS */
.wrap{ padding-bottom:env(safe-area-inset-bottom) }
